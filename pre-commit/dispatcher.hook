#!/bin/sh
# Modular dispatcher: runs all .hook scripts in this directory, with diagnostics
HOOK_DIR="$(dirname "$0")"
for hook in "$HOOK_DIR"/*.hook; do
  [ -x "$hook" ] || continue
  echo "[dispatcher] Running $hook..."
  "$hook"
  code=$?
  echo "[dispatcher] $hook exited with code $code"
  if [ $code -ne 0 ]; then
    echo "[dispatcher] WARNING: $hook failed (exit $code), but commit will proceed."
  fi
done
exit 0
